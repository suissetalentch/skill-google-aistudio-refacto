# google-aistudio-refacto

Refactor React/TypeScript frontend code generated by Google AI Studio to production-grade conventions. Detects and fixes 24 systematic anti-patterns with an automated scan-fix-verify loop.

## Installation

Add this skill to your Claude Code setup:

- **Personal:** `~/.claude/skills/google-aistudio-refacto/`
- **Project:** `.claude/skills/google-aistudio-refacto/`
- **Plugin:** Add to your `plugin.json`

## Usage

### Standard mode — guided refactoring

```
/google-aistudio-refacto ./path/to/ai-studio-project
```

### Scan only — detect anti-patterns without fixing

```
/google-aistudio-refacto --scan ./path/to/project
```

### Ralph mode — autonomous loop until all P0+P1 anti-patterns are fixed

```
/google-aistudio-refacto --ralph ./path/to/project
```

Ralph mode iterates autonomously: scan -> fix highest-priority -> build check -> commit -> rescan. Stops when all P0+P1 anti-patterns are resolved, or after 25 iterations.

Claude can also trigger this skill automatically when it detects AI Studio patterns (Tailwind CDN, ESM import maps, `metadata.json`, `React.FC`, `export default`, exposed API keys).

## What It Fixes (24 Anti-Patterns)

| # | Category | Anti-patterns |
|---|----------|--------------|
| P0 | **Build** | Tailwind CDN, ESM.sh import maps, metadata.json artifact |
| P0 | **Structure** | Flat root, no barrel exports, no feature folders |
| P0 | **Security** | API key in client bundle, prompts mixed in code, axios (use fetch) |
| P1 | **TypeScript** | `React.FC`, no strict mode, `catch (err: any)`, unnecessary `import React` |
| P1 | **Assets** | Inline SVGs instead of Lucide React |
| P1 | **Quality** | No ErrorBoundary, unsafe JSON.parse |
| P1 | **Testing** | No test files (Vitest + RTL + MSW) |
| P1 | **Linting** | No ESLint config (ESLint 9 + Prettier) |
| P2 | **i18n** | Hardcoded French strings, no i18next |
| P2 | **Performance** | No lazy loading, no code splitting, no manualChunks |
| P2 | **Accessibility** | No aria-labels, no keyboard nav, no screen reader support |
| P3 | **State** | Boolean isLoading, prop drilling (use state machine + Zustand) |
| P3 | **Forms** | Raw useState, hardcoded personal data, no Zod validation |

## Tech Stack (v3)

| Category | Technology |
|----------|-----------|
| Framework | React 19 |
| Build | Vite 6 |
| Styles | Tailwind CSS v4 (CSS-first config) |
| Language | TypeScript 5.9 (strict mode) |
| State | Zustand 5 (state machine pattern) |
| Forms | React Hook Form + Zod v4 |
| i18n | i18next 25 + react-i18next 16 |
| API | Native fetch + AbortController |
| Icons | Lucide React |
| Testing | Vitest 4 + RTL + MSW 2 |
| Linting | ESLint 9 (flat config) + Prettier |

## Documentation

| Guide | What it covers |
|-------|---------------|
| [01-project-structure](docs/01-project-structure.md) | Flat root -> feature-based src/ |
| [02-tailwind-config](docs/02-tailwind-config.md) | CDN -> Tailwind v4 + cn() utility |
| [03-typescript-strict](docs/03-typescript-strict.md) | strict: true, no React.FC |
| [04-i18n-setup](docs/04-i18n-setup.md) | i18next with namespaces |
| [05-state-management](docs/05-state-management.md) | State machine + Zustand |
| [06-api-services](docs/06-api-services.md) | API security + native fetch |
| [07-icons-and-assets](docs/07-icons-and-assets.md) | Inline SVG -> Lucide React |
| [08-performance](docs/08-performance.md) | Lazy loading + Vite chunks |
| [09-forms-validation](docs/09-forms-validation.md) | React Hook Form + Zod |
| [10-code-quality](docs/10-code-quality.md) | ErrorBoundary + safe parsing |
| [11-testing-setup](docs/11-testing-setup.md) | Vitest + RTL + MSW |
| [12-linting-formatting](docs/12-linting-formatting.md) | ESLint 9 + Prettier |
| [13-accessibility](docs/13-accessibility.md) | aria-labels + keyboard nav |
| [14-troubleshooting](docs/14-troubleshooting.md) | Common errors and fixes |

## Reference Projects

Conventions are based on three production codebases:

- **DahuAdmin** — CRM (React + Vite + TailwindCSS + Zustand)
- **place2work** — Job platform (React + Vite + TailwindCSS + i18next)
- **font-dahu** — Marketing site (React + Vite + TailwindCSS + i18next + lazy loading)

## Allowed Tools

Read, Write, Edit, Bash, Grep, Glob
